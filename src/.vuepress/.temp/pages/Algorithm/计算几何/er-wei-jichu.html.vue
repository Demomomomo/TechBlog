<template><div><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre v-pre class="language-cpp"><code><span class="token keyword">const</span> <span class="token keyword">double</span> eps<span class="token operator">=</span><span class="token number">1e-18</span><span class="token punctuation">;</span>
<span class="token comment">//记录点的横纵坐标</span>
<span class="token keyword">struct</span> <span class="token class-name">Pot</span><span class="token punctuation">{</span>
	<span class="token keyword">double</span> x<span class="token punctuation">,</span>y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//记录线段的起始点和终点</span>
<span class="token keyword">struct</span> <span class="token class-name">Line</span><span class="token punctuation">{</span>
	Pot st<span class="token punctuation">,</span>ed<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//记录圆的圆心和半径</span>
<span class="token keyword">struct</span> <span class="token class-name">Circle</span><span class="token punctuation">{</span>
	Pot p<span class="token punctuation">;</span>
	<span class="token keyword">double</span> r<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//判断小数的正负，如果绝对值小于精度就返回0，小于0就返回-1，否则返回1</span>
<span class="token keyword">int</span> <span class="token function">sign</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">fabs</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">&lt;</span>eps<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//比较小数的大小,如果x-y小于精度那么认为他们相等，如果x&lt;y就返回-1，x大于y就返回1</span>
<span class="token keyword">int</span> <span class="token function">dcmp</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span><span class="token keyword">double</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">fabs</span><span class="token punctuation">(</span>x<span class="token operator">-</span>y<span class="token punctuation">)</span><span class="token operator">&lt;</span>eps<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">&lt;</span>y<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//求两个坐标相加的点的坐标</span>
Pot <span class="token keyword">operator</span> <span class="token operator">+</span> <span class="token punctuation">(</span>Pot a<span class="token punctuation">,</span>Pot b<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>x<span class="token operator">+</span>b<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>y <span class="token operator">+</span>b<span class="token punctuation">.</span>y <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//两个点相减的坐标</span>
Pot <span class="token keyword">operator</span> <span class="token operator">-</span> <span class="token punctuation">(</span>Pot a<span class="token punctuation">,</span>Pot b<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>x <span class="token operator">-</span>b<span class="token punctuation">.</span>x <span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>y <span class="token operator">-</span>b<span class="token punctuation">.</span>y <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//判断两个点是否坐标相等</span>
<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">==</span> <span class="token punctuation">(</span>Pot a<span class="token punctuation">,</span>Pot b<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">dcmp</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>x<span class="token punctuation">,</span>b<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token function">dcmp</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>y<span class="token punctuation">,</span>b<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//求一个向量长度乘c之后的向量</span>
Pot <span class="token keyword">operator</span> <span class="token operator">*</span> <span class="token punctuation">(</span>Pot a<span class="token punctuation">,</span><span class="token keyword">double</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>x<span class="token operator">*</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>y <span class="token operator">*</span>c<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//求一个向量除以c之后的向量</span>
Pot <span class="token keyword">operator</span> <span class="token operator">/</span> <span class="token punctuation">(</span>Pot a<span class="token punctuation">,</span><span class="token keyword">double</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>x<span class="token operator">/</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>y <span class="token operator">/</span>c<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//向量a在向量b上的投影与b长度的乘积</span>
<span class="token comment">//a*b=|a||b|cos(c)</span>
<span class="token keyword">double</span> <span class="token function">dot</span><span class="token punctuation">(</span>Pot a<span class="token punctuation">,</span>Pot b<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> a<span class="token punctuation">.</span>x<span class="token operator">*</span>b<span class="token punctuation">.</span>x<span class="token operator">+</span>a<span class="token punctuation">.</span>y <span class="token operator">*</span>b<span class="token punctuation">.</span>y  <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//向量a与b张成的平行四边形的有向面积，b在a的逆时针方向为正</span>
<span class="token comment">//a*b=|a||b|sin(c)</span>
<span class="token keyword">double</span> <span class="token function">cross</span><span class="token punctuation">(</span>Pot a<span class="token punctuation">,</span>Pot b<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> a<span class="token punctuation">.</span>x <span class="token operator">*</span>b<span class="token punctuation">.</span>y <span class="token operator">-</span>b<span class="token punctuation">.</span>x <span class="token operator">*</span>a<span class="token punctuation">.</span>y <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//计算a到原点的距离</span>
<span class="token keyword">double</span> <span class="token function">get_length</span><span class="token punctuation">(</span>Pot a<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//返回角aOb的角度，返回的是弧度</span>
<span class="token keyword">double</span> <span class="token function">get_angle</span><span class="token punctuation">(</span>Pot a<span class="token punctuation">,</span>Pot b<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">acos</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">get_length</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">get_length</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//返回三个点构成的三角形面积的两倍</span>
<span class="token keyword">double</span> <span class="token function">area</span><span class="token punctuation">(</span>Pot a<span class="token punctuation">,</span>Pot b<span class="token punctuation">,</span>Pot c<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">cross</span><span class="token punctuation">(</span>b<span class="token operator">-</span>a<span class="token punctuation">,</span>c<span class="token operator">-</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//点a绕原点顺时针旋转angle度（弧度制</span>
Pot <span class="token function">rotate</span><span class="token punctuation">(</span>Pot a<span class="token punctuation">,</span><span class="token keyword">double</span> angle<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>a<span class="token punctuation">.</span>x<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token operator">+</span>a<span class="token punctuation">.</span>y <span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">-</span>a<span class="token punctuation">.</span>x<span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token operator">+</span>a<span class="token punctuation">.</span>y <span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">//求两直线的交点，v为p的向量，w为q的向量</span>
Pot <span class="token function">get_Line_inter</span><span class="token punctuation">(</span>Pot p<span class="token punctuation">,</span>Pot v<span class="token punctuation">,</span>Pot q<span class="token punctuation">,</span>Pot w<span class="token punctuation">)</span><span class="token punctuation">{</span>
	Pot u<span class="token operator">=</span>p<span class="token operator">-</span>q<span class="token punctuation">;</span>
	<span class="token keyword">double</span> t<span class="token operator">=</span><span class="token function">cross</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>u<span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">cross</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> p<span class="token operator">+</span>v<span class="token operator">*</span>t<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//点p到直线ab的距离</span>
<span class="token keyword">double</span> <span class="token function">dist_to_line</span><span class="token punctuation">(</span>Pot p<span class="token punctuation">,</span>Pot a<span class="token punctuation">,</span>Pot b<span class="token punctuation">)</span><span class="token punctuation">{</span>
	Pot v1<span class="token operator">=</span>b<span class="token operator">-</span>a<span class="token punctuation">,</span>v2<span class="token operator">=</span>p<span class="token operator">-</span>a<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">fabs</span><span class="token punctuation">(</span><span class="token function">cross</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">get_length</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//点p到线段ab的距离</span>
<span class="token keyword">double</span> <span class="token function">dist_to_seg</span><span class="token punctuation">(</span>Pot p<span class="token punctuation">,</span>Pot a<span class="token punctuation">,</span>Pot b<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">==</span>b<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token function">get_length</span><span class="token punctuation">(</span>p<span class="token operator">-</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Pot v1<span class="token operator">=</span>b<span class="token operator">-</span>a<span class="token punctuation">,</span>v2<span class="token operator">=</span>p<span class="token operator">-</span>a<span class="token punctuation">,</span>v3<span class="token operator">=</span>p<span class="token operator">-</span>b<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token function">get_length</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>v3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token function">get_length</span><span class="token punctuation">(</span>v3<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">dist_to_line</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//点p在直线ab上的投影</span>
Pot <span class="token function">get_line_pro</span><span class="token punctuation">(</span>Pot p<span class="token punctuation">,</span>Pot a<span class="token punctuation">,</span>Pot b<span class="token punctuation">)</span><span class="token punctuation">{</span>
	Pot v<span class="token operator">=</span>b<span class="token operator">-</span>a<span class="token punctuation">;</span>
	<span class="token keyword">return</span> a<span class="token operator">+</span>v<span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>p<span class="token operator">-</span>a<span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">dot</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//点a和点b之间的距离</span>
<span class="token keyword">double</span> <span class="token function">dist</span><span class="token punctuation">(</span>Pot a<span class="token punctuation">,</span>Pot b<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>x<span class="token operator">-</span>b<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>x<span class="token operator">-</span>b<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>y<span class="token operator">-</span>b<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>y<span class="token operator">-</span>b<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//判断点p是否在线段ab上</span>
<span class="token keyword">bool</span> <span class="token function">on_seg</span><span class="token punctuation">(</span>Pot p<span class="token punctuation">,</span>Pot a<span class="token punctuation">,</span>Pot b<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">sign</span><span class="token punctuation">(</span><span class="token function">cross</span><span class="token punctuation">(</span>p<span class="token operator">-</span>a<span class="token punctuation">,</span>p<span class="token operator">-</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token function">dot</span><span class="token punctuation">(</span>p<span class="token operator">-</span>a<span class="token punctuation">,</span>p<span class="token operator">-</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//判断两线段是否相交</span>
<span class="token keyword">bool</span> <span class="token function">xiangjiao</span><span class="token punctuation">(</span>Pot a1<span class="token punctuation">,</span>Pot a2<span class="token punctuation">,</span>Pot b1<span class="token punctuation">,</span>Pot b2<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">double</span> c1<span class="token operator">=</span><span class="token function">cross</span><span class="token punctuation">(</span>a2<span class="token operator">-</span>a1<span class="token punctuation">,</span>b1<span class="token operator">-</span>a1<span class="token punctuation">)</span><span class="token punctuation">,</span>c2<span class="token operator">=</span><span class="token function">cross</span><span class="token punctuation">(</span>a2<span class="token operator">-</span>a1<span class="token punctuation">,</span>b2<span class="token operator">-</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">double</span> c3<span class="token operator">=</span><span class="token function">cross</span><span class="token punctuation">(</span>b2<span class="token operator">-</span>b1<span class="token punctuation">,</span>a2<span class="token operator">-</span>b1<span class="token punctuation">)</span><span class="token punctuation">,</span>c4<span class="token operator">=</span><span class="token function">cross</span><span class="token punctuation">(</span>b2<span class="token operator">-</span>b1<span class="token punctuation">,</span>a1<span class="token operator">-</span>b1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">sign</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">sign</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token function">sign</span><span class="token punctuation">(</span>c3<span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">sign</span><span class="token punctuation">(</span>c4<span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//三条边长求三角形面积</span>
<span class="token keyword">double</span> <span class="token function">helen</span><span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">,</span><span class="token keyword">double</span> b<span class="token punctuation">,</span><span class="token keyword">double</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">double</span> p<span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token operator">+</span>b<span class="token operator">+</span>c<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>p<span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token operator">-</span>a<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token operator">-</span>b<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token operator">-</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//n个点从0到n-1求多边形面积</span>
<span class="token keyword">double</span> <span class="token function">Polygon_area</span><span class="token punctuation">(</span>Pot p<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">double</span> s<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		s<span class="token operator">+=</span><span class="token function">cross</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>p<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> s<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="n个圆的并集的面积" tabindex="-1"><a class="header-anchor" href="#n个圆的并集的面积" aria-hidden="true">#</a> n个圆的并集的面积</h2>
<div class="language-cpp line-numbers-mode" data-ext="cpp"><pre v-pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;algorithm></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cmath></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> maxn <span class="token operator">=</span> <span class="token number">1005</span><span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">double</span> db<span class="token punctuation">;</span>
<span class="token keyword">const</span> db EPS <span class="token operator">=</span> <span class="token number">1e-6</span><span class="token punctuation">;</span>
<span class="token keyword">typedef</span> pair<span class="token operator">&lt;</span>db<span class="token punctuation">,</span> db<span class="token operator">></span> PDD<span class="token punctuation">;</span>
<span class="token keyword">int</span> x<span class="token punctuation">[</span> maxn <span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token punctuation">[</span> maxn <span class="token punctuation">]</span><span class="token punctuation">,</span> r<span class="token punctuation">[</span> maxn <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> nx<span class="token punctuation">[</span> maxn <span class="token punctuation">]</span><span class="token punctuation">,</span> ny<span class="token punctuation">[</span> maxn <span class="token punctuation">]</span><span class="token punctuation">,</span> nr<span class="token punctuation">[</span> maxn <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> xl<span class="token punctuation">[</span> maxn <span class="token punctuation">]</span><span class="token punctuation">,</span> xr<span class="token punctuation">[</span> maxn <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> s<span class="token punctuation">[</span> maxn <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">inline</span> <span class="token keyword">bool</span> <span class="token function">cmp</span><span class="token punctuation">(</span> <span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span> x<span class="token punctuation">[</span> a <span class="token punctuation">]</span> <span class="token operator">-</span> r <span class="token punctuation">[</span> a <span class="token punctuation">]</span> <span class="token operator">==</span> x<span class="token punctuation">[</span> b <span class="token punctuation">]</span> <span class="token operator">-</span> r <span class="token punctuation">[</span> b <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">[</span> a <span class="token punctuation">]</span> <span class="token operator">+</span> r<span class="token punctuation">[</span> a <span class="token punctuation">]</span> <span class="token operator">&lt;</span> x<span class="token punctuation">[</span> b <span class="token punctuation">]</span> <span class="token operator">+</span> r <span class="token punctuation">[</span> b <span class="token punctuation">]</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> x<span class="token punctuation">[</span> a <span class="token punctuation">]</span> <span class="token operator">-</span> r<span class="token punctuation">[</span> a <span class="token punctuation">]</span> <span class="token operator">&lt;</span> x<span class="token punctuation">[</span> b <span class="token punctuation">]</span> <span class="token operator">-</span> r <span class="token punctuation">[</span> b <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">inline</span> <span class="token keyword">bool</span> <span class="token function">cmp0</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> r<span class="token punctuation">[</span> a <span class="token punctuation">]</span> <span class="token operator">></span> r <span class="token punctuation">[</span> b <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token keyword">int</span> n<span class="token punctuation">;</span>
<span class="token keyword">int</span> L<span class="token punctuation">,</span> R<span class="token punctuation">;</span>
PDD se<span class="token punctuation">[</span> maxn <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">inline</span> db <span class="token function">f</span><span class="token punctuation">(</span> db v<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> j <span class="token punctuation">;</span>
   db ret <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> L<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> R<span class="token punctuation">;</span> <span class="token operator">++</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> v <span class="token operator">&lt;=</span> xl<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token operator">||</span> v <span class="token operator">>=</span> xr<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
        j <span class="token operator">=</span> s<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">;</span>
        db d <span class="token operator">=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token operator">-</span> <span class="token punctuation">(</span>v <span class="token operator">-</span> x <span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>v <span class="token operator">-</span> x<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        se<span class="token punctuation">[</span> sz <span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">=</span> y<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token operator">-</span> d<span class="token punctuation">;</span>
        se<span class="token punctuation">[</span> sz <span class="token punctuation">]</span><span class="token punctuation">.</span>second <span class="token operator">=</span> y<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token operator">+</span>  d<span class="token punctuation">;</span>
        <span class="token operator">++</span> sz<span class="token punctuation">;</span>   
   <span class="token punctuation">}</span>
   <span class="token function">sort</span><span class="token punctuation">(</span> se<span class="token punctuation">,</span> se <span class="token operator">+</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> <span class="token operator">++</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>
         db nowl <span class="token punctuation">,</span> nowr<span class="token punctuation">;</span>
         nowl <span class="token operator">=</span> se<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">;</span>
         nowr <span class="token operator">=</span> se<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">;</span>
         <span class="token keyword">for</span><span class="token punctuation">(</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> <span class="token operator">++</span> j<span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span>se<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">></span> nowr<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
         <span class="token keyword">else</span> nowr <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span> nowr<span class="token punctuation">,</span> se<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>
         ret <span class="token operator">+=</span> nowr <span class="token operator">-</span> nowl<span class="token punctuation">;</span>
         i <span class="token operator">=</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>      
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">fs</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
<span class="token keyword">inline</span> db <span class="token function">rsimp</span><span class="token punctuation">(</span> db l<span class="token punctuation">,</span>db m<span class="token punctuation">,</span> db r<span class="token punctuation">,</span> db sl<span class="token punctuation">,</span> db sm<span class="token punctuation">,</span> db sr<span class="token punctuation">,</span>db tot<span class="token punctuation">)</span><span class="token punctuation">{</span>
    db m1 <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> m<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span> m2 <span class="token operator">=</span> <span class="token punctuation">(</span>m <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
    db s0 <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span> m1<span class="token punctuation">)</span><span class="token punctuation">,</span> s2 <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span> m2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    db gl <span class="token operator">=</span> <span class="token punctuation">(</span>sl <span class="token operator">+</span> sm <span class="token operator">+</span> s0 <span class="token operator">+</span> s0 <span class="token operator">+</span> s0 <span class="token operator">+</span> s0<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>m<span class="token operator">-</span>l<span class="token punctuation">)</span><span class="token punctuation">,</span> gr <span class="token operator">=</span> <span class="token punctuation">(</span>sm <span class="token operator">+</span> sr <span class="token operator">+</span> s2 <span class="token operator">+</span> s2 <span class="token operator">+</span> s2 <span class="token operator">+</span> s2<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>r<span class="token operator">-</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token function">fs</span><span class="token punctuation">(</span>gl <span class="token operator">+</span> gr <span class="token operator">-</span> tot<span class="token punctuation">)</span> <span class="token operator">&lt;</span> EPS<span class="token punctuation">)</span> <span class="token keyword">return</span> gl <span class="token operator">+</span> gr<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">rsimp</span><span class="token punctuation">(</span> l<span class="token punctuation">,</span> m1<span class="token punctuation">,</span> m<span class="token punctuation">,</span> sl<span class="token punctuation">,</span> s0<span class="token punctuation">,</span> sm<span class="token punctuation">,</span> gl<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">rsimp</span><span class="token punctuation">(</span> m<span class="token punctuation">,</span> m2<span class="token punctuation">,</span>r<span class="token punctuation">,</span> sm<span class="token punctuation">,</span> s2<span class="token punctuation">,</span> sr<span class="token punctuation">,</span> gr<span class="token punctuation">)</span><span class="token punctuation">;</span>         
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
     <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">!=</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
     <span class="token keyword">int</span> i<span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">;</span>
     <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span> i<span class="token punctuation">)</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span> x <span class="token operator">+</span> i<span class="token punctuation">,</span> y <span class="token operator">+</span> i<span class="token punctuation">,</span> r <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
     <span class="token function">sort</span><span class="token punctuation">(</span> s<span class="token punctuation">,</span> s <span class="token operator">+</span> n<span class="token punctuation">,</span> cmp0<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token keyword">for</span><span class="token punctuation">(</span>k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> j<span class="token punctuation">;</span> <span class="token operator">++</span> k<span class="token punctuation">)</span>
                 <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>nx <span class="token punctuation">[</span> k <span class="token punctuation">]</span> <span class="token operator">-</span> x <span class="token punctuation">[</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>nx <span class="token punctuation">[</span> k <span class="token punctuation">]</span> <span class="token operator">-</span> x <span class="token punctuation">[</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token operator">+</span> <span class="token punctuation">(</span>ny <span class="token punctuation">[</span> k <span class="token punctuation">]</span> <span class="token operator">-</span> y <span class="token punctuation">[</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span><span class="token punctuation">(</span>ny <span class="token punctuation">[</span> k <span class="token punctuation">]</span> <span class="token operator">-</span> y <span class="token punctuation">[</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  
                     <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>nr<span class="token punctuation">[</span> k <span class="token punctuation">]</span> <span class="token operator">-</span> r<span class="token punctuation">[</span> s<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>nr<span class="token punctuation">[</span> k <span class="token punctuation">]</span> <span class="token operator">-</span> r<span class="token punctuation">[</span> s<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
           <span class="token keyword">if</span><span class="token punctuation">(</span> k <span class="token operator">==</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               nx<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span> s<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
               ny<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">[</span> s<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
               nr<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token operator">=</span> r<span class="token punctuation">[</span> s<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
               s<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token operator">=</span> j<span class="token punctuation">;</span>
               j <span class="token operator">++</span><span class="token punctuation">;</span>    
           <span class="token punctuation">}</span>      
     <span class="token punctuation">}</span>
     n <span class="token operator">=</span> j<span class="token punctuation">;</span>
     <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span> i<span class="token punctuation">)</span> x<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token operator">=</span> nx<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token operator">=</span> ny<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">,</span> r<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token operator">=</span> nr<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
  
<span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token function">sort</span><span class="token punctuation">(</span> s<span class="token punctuation">,</span> s <span class="token operator">+</span> n<span class="token punctuation">,</span> cmp<span class="token punctuation">)</span> <span class="token punctuation">;</span>
     db lo<span class="token punctuation">,</span> hi<span class="token punctuation">,</span> ans <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
     <span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span>
     <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span> i<span class="token punctuation">)</span> xl<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span> s<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token operator">-</span> r<span class="token punctuation">[</span> s<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> xr<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span> s<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token operator">+</span> r<span class="token punctuation">[</span> s<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> r<span class="token punctuation">[</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token operator">*=</span> r<span class="token punctuation">[</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
     <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token keyword">int</span> ilo<span class="token punctuation">,</span> ihi<span class="token punctuation">;</span>
           ilo <span class="token operator">=</span> xl<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">;</span>
           ihi <span class="token operator">=</span> xr<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">;</span>
           <span class="token keyword">for</span><span class="token punctuation">(</span>j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token keyword">if</span><span class="token punctuation">(</span> xl<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token operator">></span> ihi <span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
                 ihi <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span> ihi<span class="token punctuation">,</span> xr<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           db lo <span class="token operator">=</span> ilo<span class="token punctuation">;</span>
           db hi <span class="token operator">=</span> ihi<span class="token punctuation">;</span>      
           L <span class="token operator">=</span> i<span class="token punctuation">;</span>
           R <span class="token operator">=</span> j<span class="token punctuation">;</span>
           db mid <span class="token operator">=</span> <span class="token punctuation">(</span>lo <span class="token operator">+</span> hi<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
           db sl <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>lo<span class="token punctuation">)</span><span class="token punctuation">,</span> sm <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span><span class="token punctuation">,</span> sr <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>
           db tot <span class="token operator">=</span> sl <span class="token operator">+</span> sr <span class="token operator">+</span> sm <span class="token operator">+</span> sm <span class="token operator">+</span> sm <span class="token operator">+</span> sm<span class="token punctuation">;</span>
           ans <span class="token operator">+=</span> <span class="token function">rsimp</span><span class="token punctuation">(</span> lo<span class="token punctuation">,</span> mid <span class="token punctuation">,</span> hi<span class="token punctuation">,</span> sl<span class="token punctuation">,</span> sm <span class="token punctuation">,</span> sr<span class="token punctuation">,</span> tot <span class="token punctuation">)</span><span class="token punctuation">;</span>
           i <span class="token operator">=</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%.3f\n"</span><span class="token punctuation">,</span> ans <span class="token operator">/</span> <span class="token number">6.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>


