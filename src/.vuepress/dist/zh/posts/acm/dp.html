<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.53" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mister-hope.github.io/zh/posts/acm/dp.html"><meta property="og:site_name" content="Demo"><meta property="og:title" content="dp"><meta property="og:description" content="P1002 [NOIP2002 æ™®åŠç»„] è¿‡æ²³å’ é¢˜ç›®æè¿° æ£‹ç›˜ä¸Š AA ç‚¹æœ‰ä¸€ä¸ªè¿‡æ²³å’ï¼Œéœ€è¦èµ°åˆ°ç›®æ ‡ BB ç‚¹ã€‚å’è¡Œèµ°çš„è§„åˆ™ï¼šå¯ä»¥å‘ä¸‹ã€æˆ–è€…å‘å³ã€‚åŒæ—¶åœ¨æ£‹ç›˜ä¸Š CC ç‚¹æœ‰ä¸€ä¸ªå¯¹æ–¹çš„é©¬ï¼Œè¯¥é©¬æ‰€åœ¨çš„ç‚¹å’Œæ‰€æœ‰è·³è·ƒä¸€æ­¥å¯è¾¾çš„ç‚¹ç§°ä¸ºå¯¹æ–¹é©¬çš„æ§åˆ¶ç‚¹ã€‚å› æ­¤ç§°ä¹‹ä¸ºâ€œé©¬æ‹¦è¿‡æ²³å’â€ã€‚ æ£‹ç›˜ç”¨åæ ‡è¡¨ç¤ºï¼ŒAA ç‚¹ (0, 0)(0,0)ã€BB ç‚¹ (n, m)(n,m)ï¼ŒåŒ..."><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-11-29T13:02:52.000Z"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><meta property="article:tag" content="åŠ¨æ€è§„åˆ’"><meta property="article:modified_time" content="2022-11-29T13:02:52.000Z"><link rel="alternate" hreflang="en-us" href="https://mister-hope.github.io/posts/acm/dp.html"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>dp | Demo</title><meta name="description" content="P1002 [NOIP2002 æ™®åŠç»„] è¿‡æ²³å’ é¢˜ç›®æè¿° æ£‹ç›˜ä¸Š AA ç‚¹æœ‰ä¸€ä¸ªè¿‡æ²³å’ï¼Œéœ€è¦èµ°åˆ°ç›®æ ‡ BB ç‚¹ã€‚å’è¡Œèµ°çš„è§„åˆ™ï¼šå¯ä»¥å‘ä¸‹ã€æˆ–è€…å‘å³ã€‚åŒæ—¶åœ¨æ£‹ç›˜ä¸Š CC ç‚¹æœ‰ä¸€ä¸ªå¯¹æ–¹çš„é©¬ï¼Œè¯¥é©¬æ‰€åœ¨çš„ç‚¹å’Œæ‰€æœ‰è·³è·ƒä¸€æ­¥å¯è¾¾çš„ç‚¹ç§°ä¸ºå¯¹æ–¹é©¬çš„æ§åˆ¶ç‚¹ã€‚å› æ­¤ç§°ä¹‹ä¸ºâ€œé©¬æ‹¦è¿‡æ²³å’â€ã€‚ æ£‹ç›˜ç”¨åæ ‡è¡¨ç¤ºï¼ŒAA ç‚¹ (0, 0)(0,0)ã€BB ç‚¹ (n, m)(n,m)ï¼ŒåŒ...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style.8ba2b6fc.css" as="style" /><link rel="stylesheet" href="/assets/style.8ba2b6fc.css" />
    <link rel="modulepreload" href="/assets/app.fa60c1ef.js"><link rel="modulepreload" href="/assets/dp.html.531a6133.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/dp.html.f3bef07e.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/zh/" class="brand"><img class="logo" src="/logo.svg" alt="Demo"><!----><span class="site-name hide-in-pad">Demo</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/zh/" class="nav-link" aria-label="Demo Blog"><span class="icon iconfont icon-home"></span>Demo Blog<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="åšæ–‡"><span class="title"><span class="icon iconfont icon-edit"></span>åšæ–‡</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/zh/posts/acm/bei-bao.html" class="nav-link" aria-label="ACM"><span class="icon iconfont icon-edit"></span>ACM<!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button class="dropdown-title" type="button" aria-label="é€‰æ‹©è¯­è¨€"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/" class="nav-link" aria-label="English"><!---->English<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/zh/posts/acm/dp.html" class="router-link-active router-link-exact-active nav-link active" aria-label="ç®€ä½“ä¸­æ–‡"><!---->ç®€ä½“ä¸­æ–‡<!----></a></li></ul></button></div></div><div class="nav-item"><a class="repo-link" href="https://github.com/Chivas-Regal/Tech" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><div class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></div><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading active"><span class="icon iconfont icon-note"></span><span class="title">æ–‡ç« </span><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Acm</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/zh/posts/acm/bei-bao.html" class="nav-link sidebar-link sidebar-page" aria-label="èƒŒåŒ…"><!---->èƒŒåŒ…<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/bi-ji.html" class="nav-link sidebar-link sidebar-page" aria-label="ç¬”è®°"><!---->ç¬”è®°<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/bing-cha-ji.html" class="nav-link sidebar-link sidebar-page" aria-label="å¹¶æŸ¥é›†"><!---->å¹¶æŸ¥é›†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/er-fen.html" class="nav-link sidebar-link sidebar-page" aria-label="äºŒåˆ†"><!---->äºŒåˆ†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/fei-bo-na-qi-shu-lie.html" class="nav-link sidebar-link sidebar-page" aria-label="æ–æ³¢é‚£å¥‘æ•°åˆ—"><!---->æ–æ³¢é‚£å¥‘æ•°åˆ—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/gou-zao.html" class="nav-link sidebar-link sidebar-page" aria-label="æ„é€ "><!---->æ„é€ <!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/jie-gou-ti-pai-xu.html" class="nav-link sidebar-link sidebar-page" aria-label="ç»“æ„ä½“æ’åº"><!---->ç»“æ„ä½“æ’åº<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/ju-zhen-kuai-su-mi.html" class="nav-link sidebar-link sidebar-page" aria-label="çŸ©é˜µå¿«é€Ÿå¹‚"><!---->çŸ©é˜µå¿«é€Ÿå¹‚<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/lian-biao.html" class="nav-link sidebar-link sidebar-page" aria-label="é“¾è¡¨"><!---->é“¾è¡¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/pai-lie-shu-xue.html" class="nav-link sidebar-link sidebar-page" aria-label="æ’åˆ—æ•°å­¦"><!---->æ’åˆ—æ•°å­¦<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/pai-xu.html" class="nav-link sidebar-link sidebar-page" aria-label="æ’åº"><!---->æ’åº<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/qian-zhui-he-he-cha-fen.html" class="nav-link sidebar-link sidebar-page" aria-label="å‰ç¼€å’Œå’Œå·®åˆ†"><!---->å‰ç¼€å’Œå’Œå·®åˆ†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/shu.html" class="nav-link sidebar-link sidebar-page" aria-label="æ ‘"><!---->æ ‘<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/shu-zhuang-shu-zu---xian-duan-shu.html" class="nav-link sidebar-link sidebar-page" aria-label="æ ‘çŠ¶æ•°ç»„-çº¿æ®µæ ‘"><!---->æ ‘çŠ¶æ•°ç»„-çº¿æ®µæ ‘<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/si-wei.html" class="nav-link sidebar-link sidebar-page" aria-label="æ€ç»´"><!---->æ€ç»´<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/xian-duan-shu.html" class="nav-link sidebar-link sidebar-page" aria-label="çº¿æ®µæ ‘"><!---->çº¿æ®µæ ‘<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/zi-fu-chuan.html" class="nav-link sidebar-link sidebar-page" aria-label="å­—ç¬¦ä¸²"><!---->å­—ç¬¦ä¸²<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/zui-duan-lu-+-zui-xiao-sheng-cheng-shu.html" class="nav-link sidebar-link sidebar-page" aria-label="æœ€çŸ­è·¯+æœ€å°ç”Ÿæˆæ ‘"><!---->æœ€çŸ­è·¯+æœ€å°ç”Ÿæˆæ ‘<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/bfs.html" class="nav-link sidebar-link sidebar-page" aria-label="bfs"><!---->bfs<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/ccpc-icpc.html" class="nav-link sidebar-link sidebar-page" aria-label="ccpc-icpc"><!---->ccpc-icpc<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/cf.html" class="nav-link sidebar-link sidebar-page" aria-label="cf"><!---->cf<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/dfs.html" class="nav-link sidebar-link sidebar-page" aria-label="dfs"><!---->dfs<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/zh/posts/acm/dp.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="dp"><!---->dp<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/acm/dp.html#p1002-noip2002-æ™®åŠç»„-è¿‡æ²³å’" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="P1002 [NOIP2002 æ™®åŠç»„] è¿‡æ²³å’"><!---->P1002 [NOIP2002 æ™®åŠç»„] è¿‡æ²³å’<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/acm/dp.html#p1799-æ•°åˆ—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="P1799 æ•°åˆ—"><!---->P1799 æ•°åˆ—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/acm/dp.html#cf1644c-increase-subarray-sums" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="CF1644C Increase Subarray Sums"><!---->CF1644C Increase Subarray Sums<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/acm/dp.html#p2051-ahoi2009-ä¸­å›½è±¡æ£‹-dp" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="P2051 [AHOI2009] ä¸­å›½è±¡æ£‹ï¼ˆdpï¼‰"><!---->P2051 [AHOI2009] ä¸­å›½è±¡æ£‹ï¼ˆdpï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/acm/dp.html#p1064-noip2006-æé«˜ç»„-é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="P1064 [NOIP2006 æé«˜ç»„] é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ"><!---->P1064 [NOIP2006 æé«˜ç»„] é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/acm/dp.html#p1156-åƒåœ¾é™·é˜±" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="P1156 åƒåœ¾é™·é˜±"><!---->P1156 åƒåœ¾é™·é˜±<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/kmp.html" class="nav-link sidebar-link sidebar-page" aria-label="kmp"><!---->kmp<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/map.html" class="nav-link sidebar-link sidebar-page" aria-label="map"><!---->map<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/RMQ.html" class="nav-link sidebar-link sidebar-page" aria-label="RMQ"><!---->RMQ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/acm/stl.html" class="nav-link sidebar-link sidebar-page" aria-label="stl"><!---->stl<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->dp</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://blog.csdn.net/qq_61903556?spm=1000.2115.3001.5343" target="_blank" rel="noopener noreferrer">Demo</a></span><span property="author" content="Demo"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-11-29T13:02:52.000Z"></span><span class="category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li><span class="category category6 clickable" role="navigation">algorithm</span></li></ul><meta property="articleSection" content="algorithm"></span><span aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li><span class="tag tag6 clickable" role="navigation">åŠ¨æ€è§„åˆ’</span></li></ul><meta property="keywords" content="åŠ¨æ€è§„åˆ’"></span><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 21 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT21M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/acm/dp.html#p1002-noip2002-æ™®åŠç»„-è¿‡æ²³å’" class="router-link-active router-link-exact-active toc-link level2">P1002 [NOIP2002 æ™®åŠç»„] è¿‡æ²³å’</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/acm/dp.html#p1799-æ•°åˆ—" class="router-link-active router-link-exact-active toc-link level2">P1799 æ•°åˆ—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/acm/dp.html#cf1644c-increase-subarray-sums" class="router-link-active router-link-exact-active toc-link level2">CF1644C Increase Subarray Sums</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/acm/dp.html#p2051-ahoi2009-ä¸­å›½è±¡æ£‹-dp" class="router-link-active router-link-exact-active toc-link level2">P2051 [AHOI2009] ä¸­å›½è±¡æ£‹ï¼ˆdpï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/acm/dp.html#p1064-noip2006-æé«˜ç»„-é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ" class="router-link-active router-link-exact-active toc-link level2">P1064 [NOIP2006 æé«˜ç»„] é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/acm/dp.html#p1156-åƒåœ¾é™·é˜±" class="router-link-active router-link-exact-active toc-link level2">P1156 åƒåœ¾é™·é˜±</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h2 id="p1002-noip2002-æ™®åŠç»„-è¿‡æ²³å’" tabindex="-1"><a class="header-anchor" href="#p1002-noip2002-æ™®åŠç»„-è¿‡æ²³å’" aria-hidden="true">#</a> P1002 [NOIP2002 æ™®åŠç»„] è¿‡æ²³å’</h2><h2>é¢˜ç›®æè¿°</h2><p>æ£‹ç›˜ä¸Š AA ç‚¹æœ‰ä¸€ä¸ªè¿‡æ²³å’ï¼Œéœ€è¦èµ°åˆ°ç›®æ ‡ BB ç‚¹ã€‚å’è¡Œèµ°çš„è§„åˆ™ï¼šå¯ä»¥å‘ä¸‹ã€æˆ–è€…å‘å³ã€‚åŒæ—¶åœ¨æ£‹ç›˜ä¸Š CC ç‚¹æœ‰ä¸€ä¸ªå¯¹æ–¹çš„é©¬ï¼Œè¯¥é©¬æ‰€åœ¨çš„ç‚¹å’Œæ‰€æœ‰è·³è·ƒä¸€æ­¥å¯è¾¾çš„ç‚¹ç§°ä¸ºå¯¹æ–¹é©¬çš„æ§åˆ¶ç‚¹ã€‚å› æ­¤ç§°ä¹‹ä¸ºâ€œé©¬æ‹¦è¿‡æ²³å’â€ã€‚</p><p>æ£‹ç›˜ç”¨åæ ‡è¡¨ç¤ºï¼ŒAA ç‚¹ (0, 0)(0,0)ã€BB ç‚¹ (n, m)(n,m)ï¼ŒåŒæ ·é©¬çš„ä½ç½®åæ ‡æ˜¯éœ€è¦ç»™å‡ºçš„ã€‚</p><p class="img-center"><img alt="" src="https://img-blog.csdnimg.cn/img_convert/e12dd07475a2c1336523b41db5d5d23c.png"></p><p>ç°åœ¨è¦æ±‚ä½ è®¡ç®—å‡ºå’ä» AA ç‚¹èƒ½å¤Ÿåˆ°è¾¾ BB ç‚¹çš„è·¯å¾„çš„æ¡æ•°ï¼Œå‡è®¾é©¬çš„ä½ç½®æ˜¯å›ºå®šä¸åŠ¨çš„ï¼Œå¹¶ä¸æ˜¯å’èµ°ä¸€æ­¥é©¬èµ°ä¸€æ­¥ã€‚</p><h2>è¾“å…¥æ ¼å¼</h2><p>ä¸€è¡Œå››ä¸ªæ­£æ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤º BB ç‚¹åæ ‡å’Œé©¬çš„åæ ‡ã€‚</p><h2>è¾“å‡ºæ ¼å¼</h2><p>ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„è·¯å¾„æ¡æ•°ã€‚</p><h2>è¾“å…¥è¾“å‡ºæ ·ä¾‹</h2><p><strong>è¾“å…¥ #1</strong>å¤åˆ¶</p><p>6 6 3 3</p><p><strong>è¾“å‡º #1</strong>å¤åˆ¶</p><p>6</p><p>Â æ€è·¯ï¼šå› ä¸ºåªèƒ½å‘ä¸‹æˆ–å‘å³èµ°ï¼Œæ‰€ä»¥æˆ‘ä»¬[i][j]è¿™ä¸ªç‚¹åªèƒ½ä»[i-1][j]å’Œ[i][j-1]è½¬ç§»è¿‡æ¥ï¼Œå› ä¸ºé©¬èƒ½æ§åˆ¶çš„åæ ‡æ¨ªçºµåæ ‡è¦å‡2ï¼Œæ‰€ä»¥é©¬å¦‚æœåœ¨xæˆ–yè½´ä¸Šæ•°ç»„å°±ä¼šè¶Šç•Œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠæ‰€æœ‰çš„æ¨ªçºµåæ ‡éƒ½åŠ ä¸Š2æ–¹ä¾¿è®¡ç®—ï¼Œå› ä¸ºé©¬èµ°æ—¥å­—ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨ä¸€ä¸ªvæ•°ç»„æ¥è®°å½•é©¬èƒ½æ§åˆ¶çš„åœ°æ–¹çŠ¶æ€ä¸º1ï¼Œå½“éå†åˆ°è¿™çš„æ—¶å€™ç›´æ¥è·³è¿‡ï¼Œç„¶ååˆ©ç”¨çŠ¶æ€è½¬ç§»æ–¹ç¨‹f[i][j]=f[i-1][j]+f[i][j-1]æ¥å®Œæˆå°±è¡Œï¼Œè®°å¾—åˆå§‹åŒ–çš„æ—¶å€™å› ä¸ºåŸç‚¹çš„åæ ‡ä¸º2ï¼Œ2ï¼Œåœ¨åŸç‚¹çš„è·¯å¾„åªæœ‰ä¸€æ¡ï¼Œä½†æ˜¯å½“æˆ‘ä»¬éå†çš„æ—¶å€™éœ€è¦åˆ©ç”¨æ–¹ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬è®©ä»–çš„å·¦è¾¹ä¸€ä¸ªç‚¹çš„è·¯å¾„ä¸º1ï¼ˆf[2][1]ï¼‰ï¼Œæˆ–è€…ä»–çš„ä¸‹è¾¹çš„ä¸€ä¸ªç‚¹çš„è·¯å¾„ä¸º1(f[1][2])ï¼Œè¿™æ ·æˆ‘ä»¬ç®—f[2][2]çš„æ—¶å€™å°±æ˜¯1+0=1æ¡äº†ã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;algorithm&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cstring&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> xx<span class="token punctuation">,</span>yy<span class="token punctuation">,</span>n<span class="token punctuation">,</span>m<span class="token punctuation">;</span>
<span class="token keyword">long</span> <span class="token keyword">long</span> a<span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> v<span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	cin<span class="token operator">&gt;&gt;</span>n<span class="token operator">&gt;&gt;</span>m<span class="token operator">&gt;&gt;</span>xx<span class="token operator">&gt;&gt;</span>yy<span class="token punctuation">;</span><span class="token comment">//åæ ‡ï¼Œé©¬</span>
	n<span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">;</span>
	m<span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">;</span>
	xx<span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">;</span>
	yy<span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">;</span>
	v<span class="token punctuation">[</span>xx<span class="token punctuation">]</span><span class="token punctuation">[</span>yy<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	v<span class="token punctuation">[</span>xx<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>yy<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	v<span class="token punctuation">[</span>xx<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>yy<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	v<span class="token punctuation">[</span>xx<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>yy<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	v<span class="token punctuation">[</span>xx<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>yy<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	v<span class="token punctuation">[</span>xx<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>yy<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	v<span class="token punctuation">[</span>xx<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>yy<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	v<span class="token punctuation">[</span>xx<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>yy<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	v<span class="token punctuation">[</span>xx<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>yy<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>m<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
				a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>a<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%lld&quot;</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h2 id="p1799-æ•°åˆ—" tabindex="-1"><a class="header-anchor" href="#p1799-æ•°åˆ—" aria-hidden="true">#</a> P1799 æ•°åˆ—</h2><h2>é¢˜ç›®æè¿°</h2><p>è™½ç„¶ msh é•¿å¤§äº†ï¼Œä½†å¥¹è¿˜æ˜¯å¾ˆå–œæ¬¢æ‰¾ç‚¹æ¸¸æˆè‡ªå¨±è‡ªä¹ã€‚æœ‰ä¸€å¤©ï¼Œå¥¹åœ¨çº¸ä¸Šå†™äº†ä¸€ä¸²æ•°å­—ï¼š1, 1, 2, 5, 41,1,2,5,4ã€‚æ¥ç€å¥¹æ“¦æ‰äº†ä¸€ä¸ªÂ 11ï¼Œç»“æœå‘ç°å‰©ä¸‹Â 1, 2, 41,2,4Â éƒ½åœ¨è‡ªå·±æ‰€åœ¨çš„ä½ç½®ä¸Šï¼Œå³Â 11Â åœ¨ç¬¬Â 11Â ä½ï¼Œ22Â åœ¨ç¬¬Â 22Â ä½ï¼Œ44Â åœ¨ç¬¬Â 44Â ä½ã€‚å¥¹å¸Œæœ›æ“¦æ‰æŸäº›æ•°åï¼Œå‰©ä¸‹çš„æ•°åˆ—ä¸­åœ¨è‡ªå·±ä½ç½®ä¸Šçš„æ•°å°½é‡å¤šã€‚å¥¹å‘ç°è¿™ä¸ªæ¸¸æˆå¾ˆå¥½ç©ï¼Œäºæ˜¯å¼€å§‹ä¹æ­¤ä¸ç–²åœ°ç©èµ·æ¥â€¦â€¦ä¸è¿‡å¥¹ä¸èƒ½ç¡®å®šæœ€å¤šèƒ½æœ‰å¤šå°‘ä¸ªæ•°åœ¨è‡ªå·±çš„ä½ç½®ä¸Šï¼Œæ‰€ä»¥æ‰¾åˆ°ä½ ï¼Œè¯·ä½ å¸®å¿™è®¡ç®—ä¸€ä¸‹ï¼</p><h2>è¾“å…¥æ ¼å¼</h2><p>ç¬¬ä¸€è¡Œä¸ºä¸€ä¸ªæ•°Â nnï¼Œè¡¨ç¤ºæ•°åˆ—çš„é•¿åº¦ã€‚</p><p>æ¥ä¸‹æ¥ä¸€è¡Œä¸ºÂ nnä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ­£æ•´æ•°ï¼Œç¬¬Â iiÂ è¡Œè¡¨ç¤ºæ•°Â A_iAiâ€‹ã€‚</p><h2>è¾“å‡ºæ ¼å¼</h2><p>ä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ“¦æ‰æŸäº›æ•°åï¼Œæœ€åå‰©ä¸‹çš„æ•°åˆ—ä¸­æœ€å¤šèƒ½æœ‰å¤šå°‘ä¸ªæ•°åœ¨è‡ªå·±çš„ä½ç½®ä¸Šï¼Œå³Â A_i=iAiâ€‹=iÂ æœ€å¤šèƒ½æœ‰å¤šå°‘ã€‚</p><p>æ€è·¯ï¼šè®¾dp[i][j]ä¸ºåˆ°ç¬¬iä½åˆ é™¤äº†jä¸ªæ•°çš„é€‚é…åº¦</p><p>é‚£ä¹ˆæˆ‘ä»¬å°±çœ‹ç¬¬iä½æ˜¯ä¸æ˜¯ç¬¬jä¸ªåˆ é™¤çš„æ•°</p><p>å½“æ˜¯åˆ é™¤çš„æ•°çš„æ—¶å€™dp[i][j]=dp[i-1][j-1]</p><p>å½“ä¸æ˜¯çš„æ—¶å€™ï¼Œå¦‚æœa[i]è¿™ä¸ªä½ç½®ç­‰äºi-jè¿™ä¸ªæ•°ï¼ˆåˆ äº†jä¸ªæ•°ä¹‹åçš„ä½ç½®ï¼‰ï¼Œé‚£ä¹ˆé€‚é…åº¦å°±ç­‰äº</p><p>dp[i-1][j]+1</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token comment">/*

 .----------------.  .----------------.  .----------------.  .----------------. 
| .--------------. || .--------------. || .--------------. || .--------------. |
| |  ________    | || |  _________   | || | ____    ____ | || |     ____     | |
| | |_   ___ `.  | || | |_   ___  |  | || ||_   \  /   _|| || |   .&#39;    `.   | |
| |   | |   `. \ | || |   | |_  \_|  | || |  |   \/   |  | || |  /  .--.  \  | |
| |   | |    | | | || |   |  _|  _   | || |  | |\  /| |  | || |  | |    | |  | |
| |  _| |___.&#39; / | || |  _| |___/ |  | || | _| |_\/_| |_ | || |  \  `--&#39;  /  | |
| | |________.&#39;  | || | |_________|  | || ||_____||_____|| || |   `.____.&#39;   | |
| |              | || |              | || |              | || |              | |
| &#39;--------------&#39; || &#39;--------------&#39; || &#39;--------------&#39; || &#39;--------------&#39; |
 &#39;----------------&#39;  &#39;----------------&#39;  &#39;----------------&#39;  &#39;----------------&#39;

*/</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;algorithm&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cstring&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;set&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;map&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;queue&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;deque&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cmath&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stack&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">int</span> <span class="token expression"><span class="token keyword">long</span> <span class="token keyword">long</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">lowbit</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span> x<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token operator">-</span>x<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">PI</span> <span class="token expression"><span class="token number">3.1415926535</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">endl</span> <span class="token string">&quot;\n&quot;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> pii<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">gcd</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> b<span class="token operator">?</span> <span class="token function">gcd</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>a<span class="token operator">%</span>b<span class="token punctuation">)</span><span class="token operator">:</span>a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
int dx[8]={-2,-2,-1,1,2,2,-1,1};
int dy[8]={-1,1,2,2,1,-1,-2,-2};
int dx[4]={0,-1,0,1};
int dy[4]={-1,0,1,0};
int dx[8]={-1,1,0,0,-1,-1,1,1};
int dy[8]={0,0,-1,1,-1,1,-1,1};
*/</span>
<span class="token comment">//int e[N],ne[N],h[N],idx,w[N];</span>
<span class="token comment">/*void add(int a,int b,int c){
	e[idx]=b;
	w[idx]=c;
	ne[idx]=h[a];
	h[a]=idx++;
}
*/</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token operator">=</span><span class="token number">1e3</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> n<span class="token punctuation">;</span>
<span class="token keyword">int</span> a<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> dp<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">sove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	cin<span class="token operator">&gt;&gt;</span>n<span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>cin<span class="token operator">&gt;&gt;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">&gt;=</span><span class="token number">1</span><span class="token punctuation">)</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>i<span class="token operator">-</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">int</span> ans<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		ans<span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span>dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout<span class="token operator">&lt;&lt;</span>ans<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">signed</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	ios<span class="token double-colon punctuation">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>cout<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token keyword">int</span> t<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">//	cin&gt;&gt;t;</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">sove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h2 id="cf1644c-increase-subarray-sums" tabindex="-1"><a class="header-anchor" href="#cf1644c-increase-subarray-sums" aria-hidden="true">#</a> CF1644C Increase Subarray Sums</h2><h2>é¢˜ç›®æè¿°</h2><p>You are given an arrayÂ a_1, a_2, \dots, a_na1â€‹,a2â€‹,â€¦,anâ€‹Â , consisting ofÂ nnÂ integers. You are also given an integer valueÂ xxÂ .</p><p>LetÂ f(k)f(k)Â be the maximum sum of a contiguous subarray ofÂ aaÂ after applying the following operation: addÂ xxÂ to the elements on exactlyÂ kkÂ distinct positions. An empty subarray should also be considered, it has sumÂ 00Â .</p><p>Note that the subarray doesn&#39;t have to include all of the increased elements.</p><p>Calculate the maximum value ofÂ f(k)f(k)Â for allÂ kkÂ fromÂ 00Â toÂ nnÂ independently.</p><h2>è¾“å…¥æ ¼å¼</h2><p>The first line contains a single integerÂ ttÂ (Â 1 \le t \le 50001â‰¤tâ‰¤5000Â ) â€” the number of testcases.</p><p>The first line of the testcase contains two integersÂ nnÂ andÂ xxÂ (Â 1 \le n \le 50001â‰¤nâ‰¤5000Â ;Â 0 \le x \le 10^50â‰¤xâ‰¤105Â ) â€” the number of elements in the array and the value to add.</p><p>The second line containsÂ nnÂ integersÂ a_1, a_2, \dots, a_na1â€‹,a2â€‹,â€¦,anâ€‹Â (Â -10^5 \le a_i \le 10^5âˆ’105â‰¤aiâ€‹â‰¤105Â ).</p><p>The sum ofÂ nnÂ over all testcases doesn&#39;t exceedÂ 50005000Â .</p><h2>è¾“å‡ºæ ¼å¼</h2><p>For each testcase, printÂ n + 1n+1Â integers â€” the maximum value ofÂ f(k)f(k)Â for allÂ kkÂ fromÂ 00Â toÂ nnÂ independently.</p><h2>é¢˜æ„ç¿»è¯‘</h2><h3>é¢˜ç›®ç®€è¿°</h3><p>ç»™å®šä¸€ä¸ªåºåˆ—Â \left\{a_n\right\}{anâ€‹}Â ä¸ æ•´æ•°Â xx</p><p>å®šä¹‰Â f(k)f(k)Â è¡¨ç¤ºç»è¿‡å¦‚ä¸‹æ“ä½œå, åºåˆ—Â aaÂ ä¸­æœ€å¤§çš„è¿ç»­å­æ®µå’Œ: å°†Â aaÂ ä¸­Â kkÂ ä¸ª<strong>ä¸åŒ</strong>çš„ä½ç½®ä¸Šçš„æ•°åŠ ä¸ŠÂ xx</p><p>è¯·æ±‚å‡ºÂ f(k),\ k\in[0, n]f(k),Â kâˆˆ[0,n]</p><h3>è¾“å…¥æ•°æ®</h3><p>å¤šç»„æ•°æ®Â TTÂ (1\leq T\leq 50001â‰¤Tâ‰¤5000)</p><p>æ¯ç»„æ•°æ®çš„ç¬¬ä¸€è¡Œä¸ºÂ n, xn,xÂ (1\leq n\leq 50001â‰¤nâ‰¤5000,Â 0\leq x\leq 10^50â‰¤xâ‰¤105)<br> ç¬¬äºŒè¡Œä¸ºÂ nnÂ ä¸ªæ•´æ•°Â a_1, a_2,\dots,a_na1â€‹,a2â€‹,â€¦,anâ€‹, (-10^5\leq a_i\leq 10^5âˆ’105â‰¤aiâ€‹â‰¤105)</p><p>æ‰€æœ‰æ•°æ®çš„Â nnÂ çš„æ€»å’Œä¸è¶…è¿‡Â 50005000</p><h2>è¾“å…¥è¾“å‡ºæ ·ä¾‹</h2><p><strong>è¾“å…¥ #1</strong>å¤åˆ¶</p><p>3 4 2 4 1 3 2 3 5 -2 -7 -1 10 2 -6 -1 -2 4 -6 -1 -4 4 -5 -4</p><p><strong>è¾“å‡º #1</strong>å¤åˆ¶</p><p>10 12 14 16 18 0 4 4 5 4 6 6 7 7 7 7 8 8 8 8</p><h2>è¯´æ˜/æç¤º</h2><p>In the first testcase, it doesn&#39;t matter which elements you addÂ xxÂ to. The subarray with the maximum sum will always be the entire array. If you increaseÂ kkÂ elements byÂ xxÂ ,Â k \cdot xkâ‹…xÂ will be added to the sum.</p><p>In the second testcase:</p><ul><li>ForÂ k = 0k=0Â , the empty subarray is the best option.</li><li>ForÂ k = 1k=1Â , it&#39;s optimal to increase the element at positionÂ 33Â . The best sum becomesÂ -1 + 5 = 4âˆ’1+5=4Â for a subarrayÂ [3, 3][3,3]Â .</li><li>ForÂ k = 2k=2Â , it&#39;s optimal to increase the element at positionÂ 33Â and any other element. The best sum is stillÂ 44Â for a subarrayÂ [3, 3][3,3]Â .</li><li>ForÂ k = 3k=3Â , you have to increase all elements. The best sum becomesÂ (-2 + 5) + (-7 + 5) + (-1 + 5) = 5(âˆ’2+5)+(âˆ’7+5)+(âˆ’1+5)=5Â for a subarrayÂ [1, 3][1,3]Â .</li></ul><p>Â é¢˜æ„ï¼šè®©ä½ æ±‚åŠ ä¸Škä¸ªxä¹‹åå­çŸ©é˜µæœ€å¤§çš„å’Œï¼ˆkä»0~nï¼‰</p><p>æ€è·¯ï¼šå…ˆæ±‚æ¯ä¸ªé•¿åº¦å­çŸ©é˜µæœ€å¤§çš„å’Œï¼Œlenä»1~nï¼Œå½“len==0çš„æ—¶å€™æ˜¯ç©ºçŸ©é˜µï¼Œå°±æ˜¯0.</p><p>ç”¨f[i]æ¥è¡¨ç¤ºé•¿åº¦ä¸ºiçš„å­çŸ©é˜µçš„æœ€å¤§å’Œï¼Œå› ä¸ºaiæœ‰å¯èƒ½æ˜¯è´Ÿæ•°ï¼Œæˆ‘ä»¬è¦æ‰¾æœ€å¤§å’Œï¼Œé‚£ä¹ˆå°±æŠŠfåˆå§‹åŒ–ä¸º-0x3f3f3f3fã€‚</p><p>è¦å¾ˆå¿«çš„æ±‚å­çŸ©é˜µé‚£ä¹ˆå°±éœ€è¦æ‰¾åˆ°ä»–çš„å‰ç¼€å’Œã€‚</p><p>æ±‚é•¿åº¦ä¸ºlençš„å­çŸ©é˜µçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åˆ—ä¸¾å·¦ç«¯ç‚¹ä»1~nï¼Œé‚£ä¹ˆå³ç«¯ç‚¹å°±æ˜¯i+len-1ï¼Œè¿™ä¸ªä»¥iä¸ºå·¦ç«¯ç‚¹é•¿åº¦ä¸ºlençš„å­çŸ©é˜µçš„å’Œå°±æ˜¯s[i+len-1]-s[i-1]ï¼Œç„¶åæˆ‘ä»¬åˆ—ä¸¾å·¦ç«¯ç‚¹çš„æ—¶å€™å–æœ€å¤§å€¼å°±è¡Œï¼Œå³</p><p>f[len]=max(f[len],s[i+len-1]-s[i-1])</p><p>æ“ä½œæ˜¯åŠ ä¸Škä¸ªxã€‚</p><p>å½“k&lt;=lençš„æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨f[len]é‡ŒåŠ ä¸Škä¸ªxå°±è¡Œ</p><p>å½“k&gt;lençš„æ—¶å€™ï¼Œåœ¨è¿™ä¸ªåŒºé—´é‡Œæˆ‘ä»¬åªèƒ½åŠ lenä¸ªxã€‚</p><p>æ‰€ä»¥åŠ çš„xçš„ä¸ªæ•°å°±æ˜¯q=min(len,k)ã€‚</p><p>æ‰€ä»¥å¯¹äºæ¯ä¸ªkï¼Œæˆ‘ä»¬åªéœ€è¦åˆ—ä¸¾lenä»1~nï¼Œå–f[len]+x*qçš„æœ€å¤§å€¼å°±è¡Œäº†ã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;algorithm&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cmath&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cstring&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;map&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token operator">=</span><span class="token number">5005</span><span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span>
ll n<span class="token punctuation">,</span>x<span class="token punctuation">;</span>
ll f<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>s<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">sove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	cin<span class="token operator">&gt;&gt;</span>n<span class="token operator">&gt;&gt;</span>x<span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">0x3f</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		cin<span class="token operator">&gt;&gt;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
		s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> len<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>len<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>len<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>len<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>f<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">+</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">int</span> j<span class="token operator">=</span>i<span class="token operator">+</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
				f<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">,</span>s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>k<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		ll maxk<span class="token operator">=</span><span class="token operator">-</span><span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> len<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>len<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>len<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			ll q<span class="token operator">=</span><span class="token function">min</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
			maxk<span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>maxk<span class="token punctuation">,</span>f<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token operator">+</span>q<span class="token operator">*</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout<span class="token operator">&lt;&lt;</span>maxk<span class="token operator">&lt;&lt;</span><span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	ios<span class="token double-colon punctuation">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>cout<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token keyword">int</span> t<span class="token punctuation">;</span>
	cin<span class="token operator">&gt;&gt;</span>t<span class="token punctuation">;</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">sove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h2 id="p2051-ahoi2009-ä¸­å›½è±¡æ£‹-dp" tabindex="-1"><a class="header-anchor" href="#p2051-ahoi2009-ä¸­å›½è±¡æ£‹-dp" aria-hidden="true">#</a> P2051 [AHOI2009] ä¸­å›½è±¡æ£‹ï¼ˆdpï¼‰</h2><h2>é¢˜ç›®æè¿°</h2><p>è¿™æ¬¡å°å¯å¯æƒ³è§£å†³çš„éš¾é¢˜å’Œä¸­å›½è±¡æ£‹æœ‰å…³ï¼Œåœ¨ä¸€ä¸ªÂ nnÂ è¡ŒÂ mmÂ åˆ—çš„æ£‹ç›˜ä¸Šï¼Œè®©ä½ æ”¾è‹¥å¹²ä¸ªç‚®ï¼ˆå¯ä»¥æ˜¯Â 00Â ä¸ªï¼‰ï¼Œä½¿å¾—æ²¡æœ‰ä¸€ä¸ªç‚®å¯ä»¥æ”»å‡»åˆ°å¦ä¸€ä¸ªç‚®ï¼Œè¯·é—®æœ‰å¤šå°‘ç§æ”¾ç½®æ–¹æ³•ã€‚å¤§å®¶è‚¯å®šå¾ˆæ¸…æ¥šï¼Œåœ¨ä¸­å›½è±¡æ£‹ä¸­ç‚®çš„è¡Œèµ°æ–¹å¼æ˜¯ï¼šä¸€ä¸ªç‚®æ”»å‡»åˆ°å¦ä¸€ä¸ªç‚®ï¼Œå½“ä¸”ä»…å½“å®ƒä»¬åœ¨åŒä¸€è¡Œæˆ–åŒä¸€åˆ—ä¸­ï¼Œä¸”å®ƒä»¬ä¹‹é—´æ°å¥½ æœ‰ä¸€ä¸ªæ£‹å­ã€‚ä½ ä¹Ÿæ¥å’Œå°å¯å¯ä¸€èµ·é”»ç‚¼ä¸€ä¸‹æ€ç»´å§ï¼</p><h2>è¾“å…¥æ ¼å¼</h2><p>ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°Â n,mn,mï¼Œä¹‹é—´ç”±ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚</p><h2>è¾“å‡ºæ ¼å¼</h2><p>æ€»å…±çš„æ–¹æ¡ˆæ•°ï¼Œç”±äºè¯¥å€¼å¯èƒ½å¾ˆå¤§ï¼Œåªéœ€ç»™å‡ºæ–¹æ¡ˆæ•°æ¨¡Â 99999739999973Â çš„ç»“æœã€‚</p><h2>è¾“å…¥è¾“å‡ºæ ·ä¾‹</h2><p><strong>è¾“å…¥ #1</strong>å¤åˆ¶</p><p>1 3</p><p><strong>è¾“å‡º #1</strong>å¤åˆ¶</p><p>7</p><h2>è¯´æ˜/æç¤º</h2><p><strong>æ ·ä¾‹è¯´æ˜</strong></p><p>é™¤äº†Â 33Â ä¸ªæ ¼å­é‡Œéƒ½å¡æ»¡äº†ç‚®ä»¥å¤–ï¼Œå…¶å®ƒæ–¹æ¡ˆéƒ½æ˜¯å¯è¡Œçš„ï¼Œæ‰€ä»¥ä¸€å…±æœ‰Â 2 \times 2 \times 2-1=72Ã—2Ã—2âˆ’1=7Â ç§æ–¹æ¡ˆã€‚</p><p><strong>æ•°æ®è§„æ¨¡ä¸çº¦å®š</strong></p><ul><li>å¯¹äºÂ 30\%30%Â çš„æ•°æ®ï¼ŒnnÂ å’ŒÂ mmÂ å‡ä¸è¶…è¿‡Â 66ã€‚</li><li>å¯¹äºÂ 50\%50%Â çš„æ•°æ®ï¼ŒnnÂ å’ŒÂ mmÂ è‡³å°‘æœ‰ä¸€ä¸ªæ•°ä¸è¶…è¿‡Â 88ã€‚</li><li>å¯¹äºÂ 100\%100%Â çš„æ•°æ®ï¼Œ1 \leq n,m \leq 1001â‰¤n,mâ‰¤100ã€‚</li></ul><p>æ€è·¯ï¼šå› ä¸ºèƒ½æ”»å‡»åˆ°çš„æƒ…å†µæ˜¯åŒè¡ŒåŒåˆ—ä¸¤ä¸ªç‚®ä¸­é—´éš”äº†ä¸€ä¸ªç‚®çš„æƒ…å†µ</p><p>ä¹Ÿå°±æ˜¯æœ‰ä¸‰ä¸ªç‚®åœ¨åŒä¸€è¡Œæˆ–è€…åŒä¸€åˆ—</p><p>é‚£ä¹ˆæˆ‘ä»¬å°±è®©ä»–ä¸€è¡Œå’Œä¸€åˆ—å°±åªèƒ½æœ‰0 1 2ä¸ªç‚®</p><p>dp[i][j][k]è¡¨ç¤ºå‰iè¡Œæœ‰jåˆ—æ”¾äº†1ä¸ªç‚®ï¼Œæœ‰kåˆ—æ”¾äº†ä¸¤ä¸ªç‚®</p><p>é¦–å…ˆç¬¬iè¡Œä¸æ”¾çš„è¯ï¼šdp[i][j][k]=dp[i-1][j][k]</p><p>ç¬¬iè¡Œæ”¾ä¸€ä¸ªï¼š</p><p>1.æ”¾åœ¨æœ‰0ä¸ªç‚®çš„åˆ—ä¸Šï¼šdp[i][j][k]+=dp[i-1][j-1][k]*(m-j-k+1)</p><p>(å› ä¸ºæˆ‘ä»¬æ”¾åœ¨äº†æœ‰0ä¸ªç‚®çš„åˆ—ä¸Šä¹‹åçš„çŠ¶æ€æ˜¯ j kï¼Œjæ¯”åŸæ¥å¤šäº†ä¸€ä¸ªï¼Œkä¸å˜é‚£ä¹ˆi-1è¡Œçš„çŠ¶æ€å°±æ˜¯dp[i][j-1][k]ï¼‰</p><p>2.æ”¾åœ¨æœ‰1ä¸ªç‚®çš„åˆ—ä¸Šï¼šdp[i][j][k]+=dp[i-1][j+1][k-1]*(j+1)</p><p>ç¬¬iè¡Œæ”¾ä¸¤ä¸ªï¼š</p><p>1.éƒ½æ”¾åœ¨æœ‰0ä¸ªæ£‹å­çš„åˆ—ï¼šdp[i][j][k]+=dp[i-1][j-2][k]*getc(m-k-j+2,2,9999973);</p><p>2.éƒ½æ”¾åœ¨æœ‰1ä¸ªæ£‹å­çš„åˆ—ï¼šdp[i][j][k]+=dp[i-1][j+2][k-2]*getc(j+2,2,9999973)</p><p>3.ä¸€ä¸ªæ”¾åœ¨æœ‰0ä¸ªçš„ä¸€ä¸ªæ”¾åœ¨æœ‰ä¸€ä¸ªçš„ï¼šdp[i][j][k]+=dp[i-1][j][k-1]*j*(m-j-k+1)</p><p>æœ€åçš„ç­”æ¡ˆæ˜¯æ‰€æœ‰åœ¨å‰nè¡Œï¼Œæœ‰0~mä¸ªåˆ—æ”¾äº†1ä¸ªï¼Œæœ‰0~m-jåˆ—æ”¾äº†ä¸¤ä¸ªçš„æ–¹æ³•çš„æ€»å’Œ</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token comment">/*

 .----------------.  .----------------.  .----------------.  .----------------. 
| .--------------. || .--------------. || .--------------. || .--------------. |
| |  ________    | || |  _________   | || | ____    ____ | || |     ____     | |
| | |_   ___ `.  | || | |_   ___  |  | || ||_   \  /   _|| || |   .&#39;    `.   | |
| |   | |   `. \ | || |   | |_  \_|  | || |  |   \/   |  | || |  /  .--.  \  | |
| |   | |    | | | || |   |  _|  _   | || |  | |\  /| |  | || |  | |    | |  | |
| |  _| |___.&#39; / | || |  _| |___/ |  | || | _| |_\/_| |_ | || |  \  `--&#39;  /  | |
| | |________.&#39;  | || | |_________|  | || ||_____||_____|| || |   `.____.&#39;   | |
| |              | || |              | || |              | || |              | |
| &#39;--------------&#39; || &#39;--------------&#39; || &#39;--------------&#39; || &#39;--------------&#39; |
 &#39;----------------&#39;  &#39;----------------&#39;  &#39;----------------&#39;  &#39;----------------&#39;

*/</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;algorithm&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cstring&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;set&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;map&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;queue&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;deque&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cmath&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stack&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">int</span> <span class="token expression"><span class="token keyword">long</span> <span class="token keyword">long</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">lowbit</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span> x<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token operator">-</span>x<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">PI</span> <span class="token expression"><span class="token number">3.1415926535</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">endl</span> <span class="token string">&quot;\n&quot;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> pii<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">gcd</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> b<span class="token operator">?</span> <span class="token function">gcd</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>a<span class="token operator">%</span>b<span class="token punctuation">)</span><span class="token operator">:</span>a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
int dx[8]={-2,-2,-1,1,2,2,-1,1};
int dy[8]={-1,1,2,2,1,-1,-2,-2};
int dx[4]={0,-1,0,1};
int dy[4]={-1,0,1,0};
int dx[8]={-1,1,0,0,-1,-1,1,1};
int dy[8]={0,0,-1,1,-1,1,-1,1};
*/</span>
<span class="token comment">//int e[N],ne[N],h[N],idx,w[N];</span>
<span class="token comment">/*void add(int a,int b,int c){
	e[idx]=b;
	w[idx]=c;
	ne[idx]=h[a];
	h[a]=idx++;
}
*/</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token operator">=</span><span class="token number">100</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> m<span class="token punctuation">,</span>p<span class="token punctuation">,</span>n<span class="token punctuation">;</span>
<span class="token keyword">int</span> dp<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">ksm</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">,</span><span class="token keyword">int</span> mod<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">int</span> res<span class="token operator">=</span><span class="token number">1</span><span class="token operator">%</span>mod<span class="token punctuation">;</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">)</span>res<span class="token operator">=</span>res<span class="token operator">*</span>a<span class="token operator">%</span>mod<span class="token punctuation">;</span>
		a<span class="token operator">=</span>a<span class="token operator">*</span>a<span class="token operator">%</span>mod<span class="token punctuation">;</span>
		b<span class="token operator">&gt;&gt;=</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">,</span><span class="token keyword">int</span> mod<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token operator">&gt;</span>a<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> res<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>a<span class="token punctuation">,</span>j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>b<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">,</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		res<span class="token operator">=</span>res<span class="token operator">*</span>i<span class="token operator">%</span>mod<span class="token punctuation">;</span>
		res<span class="token operator">=</span>res<span class="token operator">*</span><span class="token function">ksm</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span>mod<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span>mod<span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">getc</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">,</span><span class="token keyword">int</span> mod<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">&lt;</span>mod<span class="token operator">&amp;&amp;</span>b<span class="token operator">&lt;</span>mod<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token function">c</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>mod<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token function">c</span><span class="token punctuation">(</span>a<span class="token operator">%</span>mod<span class="token punctuation">,</span>b<span class="token operator">%</span>mod<span class="token punctuation">,</span>mod<span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">getc</span><span class="token punctuation">(</span>a<span class="token operator">/</span>mod<span class="token punctuation">,</span>b<span class="token operator">/</span>mod<span class="token punctuation">,</span>mod<span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">sove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	cin<span class="token operator">&gt;&gt;</span>n<span class="token operator">&gt;&gt;</span>m<span class="token punctuation">;</span>
	p<span class="token operator">=</span><span class="token number">9999973</span><span class="token punctuation">;</span>
	dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>m<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">+</span>k<span class="token operator">&lt;=</span>m<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//ä¸æ”¾</span>
				dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">%=</span>p<span class="token punctuation">;</span>
				<span class="token comment">//æ”¾ä¸€ä¸ªæ£‹å­</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">&gt;=</span><span class="token number">1</span><span class="token punctuation">)</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">+=</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>m<span class="token operator">-</span>j<span class="token operator">-</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ”¾åœ¨æœ‰0ä¸ªæ£‹å­çš„åˆ—</span>
				dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">%=</span>p<span class="token punctuation">;</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token operator">&gt;=</span><span class="token number">1</span><span class="token punctuation">)</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">+=</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ”¾åœ¨æœ‰ä¸€ä¸ªæ£‹å­çš„åˆ—</span>
				dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">%=</span>p<span class="token punctuation">;</span>
				<span class="token comment">//æ”¾ä¸¤ä¸ª</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">&gt;=</span><span class="token number">2</span><span class="token punctuation">)</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">+=</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">*</span><span class="token function">getc</span><span class="token punctuation">(</span>m<span class="token operator">-</span>k<span class="token operator">-</span>j<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">9999973</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//éƒ½æ”¾åœ¨æœ‰0ä¸ªæ£‹å­çš„åˆ—</span>
				dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">%=</span>p<span class="token punctuation">;</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token operator">&gt;=</span><span class="token number">2</span><span class="token punctuation">)</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">+=</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token function">getc</span><span class="token punctuation">(</span>j<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">9999973</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//éƒ½æ”¾åœ¨æœ‰1ä¸ªæ£‹å­çš„åˆ—</span>
				dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">%=</span>p<span class="token punctuation">;</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token operator">&gt;=</span><span class="token number">1</span><span class="token punctuation">)</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">+=</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span>j<span class="token operator">*</span><span class="token punctuation">(</span>m<span class="token operator">-</span>j<span class="token operator">-</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¸€ä¸ªæ”¾åœ¨æœ‰0ä¸ªçš„ä¸€ä¸ªæ”¾åœ¨æœ‰ä¸€ä¸ªçš„</span>
				dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">%=</span>p<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">int</span> ans<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">+</span>i<span class="token operator">&lt;=</span>m<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			ans<span class="token operator">=</span><span class="token punctuation">(</span>ans<span class="token operator">+</span>dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">%</span>p<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	cout<span class="token operator">&lt;&lt;</span>ans<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">signed</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	ios<span class="token double-colon punctuation">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>cout<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token keyword">int</span> t<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">//	cin&gt;&gt;t;</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">sove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Â </p><h2 id="p1064-noip2006-æé«˜ç»„-é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#p1064-noip2006-æé«˜ç»„-é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ" aria-hidden="true">#</a> P1064 [NOIP2006 æé«˜ç»„] é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ</h2><p>é‡‘æ˜ä»Šå¤©å¾ˆå¼€å¿ƒï¼Œå®¶é‡Œè´­ç½®çš„æ–°æˆ¿å°±è¦é¢†é’¥åŒ™äº†ï¼Œæ–°æˆ¿é‡Œæœ‰ä¸€é—´é‡‘æ˜è‡ªå·±ä¸“ç”¨çš„å¾ˆå®½æ•çš„æˆ¿é—´ã€‚æ›´è®©ä»–é«˜å…´çš„æ˜¯ï¼Œå¦ˆå¦ˆæ˜¨å¤©å¯¹ä»–è¯´ï¼šâ€œä½ çš„æˆ¿é—´éœ€è¦è´­ä¹°å“ªäº›ç‰©å“ï¼Œæ€ä¹ˆå¸ƒç½®ï¼Œä½ è¯´äº†ç®—ï¼Œåªè¦ä¸è¶…è¿‡Â nnÂ å…ƒé’±å°±è¡Œâ€ã€‚ä»Šå¤©ä¸€æ—©ï¼Œé‡‘æ˜å°±å¼€å§‹åšé¢„ç®—äº†ï¼Œä»–æŠŠæƒ³ä¹°çš„ç‰©å“åˆ†ä¸ºä¸¤ç±»ï¼šä¸»ä»¶ä¸é™„ä»¶ï¼Œé™„ä»¶æ˜¯ä»å±äºæŸä¸ªä¸»ä»¶çš„ï¼Œä¸‹è¡¨å°±æ˜¯ä¸€äº›ä¸»ä»¶ä¸é™„ä»¶çš„ä¾‹å­ï¼š</p><table><thead><tr><th>ä¸»ä»¶</th><th>é™„ä»¶</th></tr></thead><tbody><tr><td>ç”µè„‘</td><td>æ‰“å°æœºï¼Œæ‰«æä»ª</td></tr><tr><td>ä¹¦æŸœ</td><td>å›¾ä¹¦</td></tr><tr><td>ä¹¦æ¡Œ</td><td>å°ç¯ï¼Œæ–‡å…·</td></tr><tr><td>å·¥ä½œæ¤…</td><td>æ— </td></tr></tbody></table><p>å¦‚æœè¦ä¹°å½’ç±»ä¸ºé™„ä»¶çš„ç‰©å“ï¼Œå¿…é¡»å…ˆä¹°è¯¥é™„ä»¶æ‰€å±çš„ä¸»ä»¶ã€‚æ¯ä¸ªä¸»ä»¶å¯ä»¥æœ‰Â 00Â ä¸ªã€11Â ä¸ªæˆ–Â 22Â ä¸ªé™„ä»¶ã€‚æ¯ä¸ªé™„ä»¶å¯¹åº”ä¸€ä¸ªä¸»ä»¶ï¼Œé™„ä»¶ä¸å†æœ‰ä»å±äºè‡ªå·±çš„é™„ä»¶ã€‚é‡‘æ˜æƒ³ä¹°çš„ä¸œè¥¿å¾ˆå¤šï¼Œè‚¯å®šä¼šè¶…è¿‡å¦ˆå¦ˆé™å®šçš„Â nnÂ å…ƒã€‚äºæ˜¯ï¼Œä»–æŠŠæ¯ä»¶ç‰©å“è§„å®šäº†ä¸€ä¸ªé‡è¦åº¦ï¼Œåˆ†ä¸ºÂ 55Â ç­‰ï¼šç”¨æ•´æ•°Â 1 \sim 51âˆ¼5Â è¡¨ç¤ºï¼Œç¬¬Â 55Â ç­‰æœ€é‡è¦ã€‚ä»–è¿˜ä»å› ç‰¹ç½‘ä¸ŠæŸ¥åˆ°äº†æ¯ä»¶ç‰©å“çš„ä»·æ ¼ï¼ˆéƒ½æ˜¯Â 1010Â å…ƒçš„æ•´æ•°å€ï¼‰ã€‚ä»–å¸Œæœ›åœ¨ä¸è¶…è¿‡Â nnÂ å…ƒçš„å‰æä¸‹ï¼Œä½¿æ¯ä»¶ç‰©å“çš„ä»·æ ¼ä¸é‡è¦åº¦çš„ä¹˜ç§¯çš„æ€»å’Œæœ€å¤§ã€‚</p><p>è®¾ç¬¬Â jjÂ ä»¶ç‰©å“çš„ä»·æ ¼ä¸ºÂ v_jvjâ€‹ï¼Œé‡è¦åº¦ä¸ºw_jwjâ€‹ï¼Œå…±é€‰ä¸­äº†Â kkÂ ä»¶ç‰©å“ï¼Œç¼–å·ä¾æ¬¡ä¸ºÂ j_1,j_2,\dots,j_kj1â€‹,j2â€‹,â€¦,jkâ€‹ï¼Œåˆ™æ‰€æ±‚çš„æ€»å’Œä¸ºï¼š</p><p>v_{j_1} \times w_{j_1}+v_{j_2} \times w_{j_2}+ \dots +v_{j_k} \times w_{j_k}vj1â€‹â€‹Ã—wj1â€‹â€‹+vj2â€‹â€‹Ã—wj2â€‹â€‹+â‹¯+vjkâ€‹â€‹Ã—wjkâ€‹â€‹ã€‚</p><p>è¯·ä½ å¸®åŠ©é‡‘æ˜è®¾è®¡ä¸€ä¸ªæ»¡è¶³è¦æ±‚çš„è´­ç‰©å•ã€‚</p><h2>è¾“å…¥æ ¼å¼</h2><p>ç¬¬ä¸€è¡Œæœ‰ä¸¤ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºæ€»é’±æ•°Â nnÂ å’Œå¸Œæœ›è´­ä¹°çš„ç‰©å“ä¸ªæ•°Â mmã€‚</p><p>ç¬¬Â 22Â åˆ°ç¬¬Â (m + 1)(m+1)Â è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•°ï¼Œç¬¬Â (i + 1)(i+1)Â è¡Œçš„æ•´æ•°Â v_iviâ€‹ï¼Œp_ipiâ€‹ï¼Œq_iqiâ€‹Â åˆ†åˆ«è¡¨ç¤ºç¬¬Â iiÂ ä»¶ç‰©å“çš„ä»·æ ¼ã€é‡è¦åº¦ä»¥åŠå®ƒå¯¹åº”çš„çš„ä¸»ä»¶ã€‚å¦‚æœÂ q_i=0qiâ€‹=0ï¼Œè¡¨ç¤ºè¯¥ç‰©å“æœ¬èº«æ˜¯ä¸»ä»¶ã€‚</p><h2>è¾“å‡ºæ ¼å¼</h2><p>è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆã€‚</p><h2>è¾“å…¥è¾“å‡ºæ ·ä¾‹</h2><p><strong>è¾“å…¥ #1</strong>å¤åˆ¶</p><p>1000 5 800 2 0 400 5 1 300 5 1 400 3 0 500 2 0</p><p><strong>è¾“å‡º #1</strong>å¤åˆ¶</p><p>2200</p><h2>è¯´æ˜/æç¤º</h2><p>æ•°æ®è§„æ¨¡ä¸çº¦å®š</p><p>å¯¹äºå…¨éƒ¨çš„æµ‹è¯•ç‚¹ï¼Œä¿è¯Â 1 \leq n \leq 3.2 \times 10^41â‰¤nâ‰¤3.2Ã—104ï¼Œ1 \leq m \leq 601â‰¤mâ‰¤60ï¼Œ0 \leq v_i \leq 10^40â‰¤viâ€‹â‰¤104ï¼Œ1 \leq p_i \leq 51â‰¤piâ€‹â‰¤5ï¼Œ0 \leq q_i \leq m0â‰¤qiâ€‹â‰¤mï¼Œç­”æ¡ˆä¸è¶…è¿‡Â 2 \times 10^52Ã—105ã€‚</p><p>æ€è·¯ï¼šä¸€ä¸ªä¸»ä»¶æœ‰0-2ä¸ªé™„ä»¶ï¼Œä¹°é™„ä»¶çš„è¯ä¸€å®šè¦ä¹°ä¸»ä»¶ï¼Œä¹°ä¸»ä»¶ä¸ä¸€å®šéœ€è¦ä¹°é™„ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä»ä¹°ä¸»ä»¶iå¼€å§‹å…¥æ‰‹ï¼Œæœ‰å››ç§æƒ…å†µï¼š1.ä¸å¤Ÿä¹°ä¸»ä»¶i 2.åªèƒ½ä¹°ä¸»ä»¶i 3.èƒ½ä¹°ä¸»ä»¶iå’Œé™„ä»¶1 4.èƒ½ä¹°ä¸»ä»¶iå’Œé™„ä»¶2ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±æ ¹æ®è¿™å››ç§æƒ…å†µï¼Œç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„v[i][j]æ¥è®°å½•ç¼–å·ä¸ºiçš„jä¸»ä»¶æˆ–é™„ä»¶çš„ä»·æ ¼ï¼Œå½“j==0æ—¶æ˜¯è®°å½•ç¼–å·ä¸ºiçš„ä¸»ä»¶åŠ é™„ä»¶çš„ä¸ªæ•°ï¼Œå½“j==1æ—¶è¡¨ç¤ºçš„æ˜¯ä¸»ä»¶ï¼Œj==2è¡¨ç¤ºçš„æ˜¯é™„ä»¶1ï¼Œj==3è¡¨ç¤ºçš„æ˜¯é™„ä»¶2ã€‚ç„¶åå†ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„p[i][j]æ¥è¡¨ç¤ºç¼–å·ä¸ºiçš„jä¸»ä»¶æˆ–é™„ä»¶çš„ä»·æ ¼Ã—é‡è¦å€¼ï¼Œp[i][j]è¡¨ç¤ºç¼–å·ä¸ºiï¼Œå½“j==0æ—¶è¡¨ç¤ºçš„ç¼–å·ä¸ºiçš„ä¸»ä»¶+é™„ä»¶çš„æ•°é‡ï¼Œå½“j==1æ—¶è¡¨ç¤ºä¸»ä»¶çš„ä»·æ ¼Ã—é‡è¦å€¼ï¼Œå½“j==2æ—¶è¡¨ç¤ºé™„ä»¶1çš„ä»·æ ¼Ã—é‡è¦å€¼ï¼Œj==3æ—¶è¡¨ç¤ºé™„ä»¶2çš„ä»·æ ¼Ã—é‡è¦å€¼ã€‚</p><p>ç„¶åç”¨01èƒŒåŒ…é—®é¢˜ä¸€ä¸ªä¸ªæšä¸¾ä»·æ ¼æ˜¯å¦å¤§äºé‚£å››ç§æƒ…å†µç„¶åæ›´æ–°å°±å¯ä»¥äº†ã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;algorithm&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cstring&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span>
<span class="token keyword">int</span> f<span class="token punctuation">[</span><span class="token number">32005</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> v<span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> p<span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	cin<span class="token operator">&gt;&gt;</span>m<span class="token operator">&gt;&gt;</span>n<span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">int</span> x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token punctuation">;</span>
		cin<span class="token operator">&gt;&gt;</span>x<span class="token operator">&gt;&gt;</span>y<span class="token operator">&gt;&gt;</span>z<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>z<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">++</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>x<span class="token punctuation">;</span>
			p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">++</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>x<span class="token operator">*</span>y<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			v<span class="token punctuation">[</span>z<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">++</span>v<span class="token punctuation">[</span>z<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>x<span class="token punctuation">;</span>
			p<span class="token punctuation">[</span>z<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">++</span>p<span class="token punctuation">[</span>z<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span>x<span class="token operator">*</span>y<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">continue</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>m<span class="token punctuation">;</span>j<span class="token operator">&gt;=</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>j<span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&gt;=</span><span class="token number">2</span><span class="token operator">&amp;&amp;</span>j<span class="token operator">&gt;=</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>j<span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&gt;=</span><span class="token number">3</span><span class="token operator">&amp;&amp;</span>j<span class="token operator">&gt;=</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>j<span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&gt;=</span><span class="token number">3</span><span class="token operator">&amp;&amp;</span>j<span class="token operator">&gt;=</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>j<span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">-</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
	<span class="token punctuation">}</span>
	cout<span class="token operator">&lt;&lt;</span>f<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h2 id="p1156-åƒåœ¾é™·é˜±" tabindex="-1"><a class="header-anchor" href="#p1156-åƒåœ¾é™·é˜±" aria-hidden="true">#</a> P1156 åƒåœ¾é™·é˜±</h2><h2>é¢˜ç›®æè¿°</h2><p>å¡é—¨â€•â€•å†œå¤«çº¦ç¿°æå…¶çè§†çš„ä¸€æ¡ ```cpp Holsteins ``` å¥¶ç‰›â€•â€•å·²ç»è½äº†åˆ°â€œåƒåœ¾äº•â€ä¸­ã€‚â€œåƒåœ¾äº•â€æ˜¯å†œå¤«ä»¬æ‰”åƒåœ¾çš„åœ°æ–¹ï¼Œå®ƒçš„æ·±åº¦ä¸ºD(2 \le D \le 100)D(2â‰¤Dâ‰¤100)è‹±å°ºã€‚</p><p>å¡é—¨æƒ³æŠŠåƒåœ¾å †èµ·æ¥ï¼Œç­‰åˆ°å †å¾—ä¸äº•åŒæ ·é«˜æ—¶ï¼Œå¥¹å°±èƒ½é€ƒå‡ºäº•å¤–äº†ã€‚å¦å¤–ï¼Œå¡é—¨å¯ä»¥é€šè¿‡åƒä¸€äº›åƒåœ¾æ¥ç»´æŒè‡ªå·±çš„ç”Ÿå‘½ã€‚</p><p>æ¯ä¸ªåƒåœ¾éƒ½å¯ä»¥ç”¨æ¥åƒæˆ–å †æ”¾ï¼Œå¹¶ä¸”å †æ”¾åƒåœ¾ä¸ç”¨èŠ±è´¹å¡é—¨çš„æ—¶é—´ã€‚</p><p>å‡è®¾å¡é—¨é¢„å…ˆçŸ¥é“äº†æ¯ä¸ªåƒåœ¾æ‰”ä¸‹çš„æ—¶é—´t(0&lt; t \le 1000)t(0&lt;tâ‰¤1000)ï¼Œä»¥åŠæ¯ä¸ªåƒåœ¾å †æ”¾çš„é«˜åº¦h(1 \le h \le 25h(1â‰¤hâ‰¤25)å’Œåƒè¿›è¯¥åƒåœ¾èƒ½ç»´æŒç”Ÿå‘½çš„æ—¶é—´f(1 \le f \le 30)f(1â‰¤fâ‰¤30)ï¼Œè¦æ±‚å‡ºå¡é—¨æœ€æ—©èƒ½é€ƒå‡ºäº•å¤–çš„æ—¶é—´ï¼Œå‡è®¾å¡é—¨å½“å‰ä½“å†…æœ‰è¶³å¤ŸæŒç»­1010å°æ—¶çš„èƒ½é‡ï¼Œå¦‚æœå¡é—¨1010å°æ—¶å†…æ²¡æœ‰è¿›é£Ÿï¼Œå¡é—¨å°±å°†é¥¿æ­»ã€‚</p><h2>è¾“å…¥æ ¼å¼</h2><p>ç¬¬ä¸€è¡Œä¸º22ä¸ªæ•´æ•°ï¼ŒDDå’ŒÂ G (1 \le G \le 100)G(1â‰¤Gâ‰¤100)ï¼ŒGGä¸ºè¢«æŠ•å…¥äº•çš„åƒåœ¾çš„æ•°é‡ã€‚</p><p>ç¬¬äºŒåˆ°ç¬¬G+1G+1è¡Œæ¯è¡ŒåŒ…æ‹¬33ä¸ªæ•´æ•°ï¼šT (0 &lt; T &lt;= 1000)T(0&lt;T&lt;=1000)ï¼Œè¡¨ç¤ºåƒåœ¾è¢«æŠ•è¿›äº•ä¸­çš„æ—¶é—´ï¼›F (1 \le F \le 30)F(1â‰¤Fâ‰¤30)ï¼Œè¡¨ç¤ºè¯¥åƒåœ¾èƒ½ç»´æŒå¡é—¨ç”Ÿå‘½çš„æ—¶é—´ï¼›å’ŒÂ H (1 \le H \le 25)H(1â‰¤Hâ‰¤25)ï¼Œè¯¥åƒåœ¾èƒ½å«é«˜çš„é«˜åº¦ã€‚</p><h2>è¾“å‡ºæ ¼å¼</h2><p>å¦‚æœå¡é—¨å¯ä»¥çˆ¬å‡ºé™·é˜±ï¼Œè¾“å‡ºä¸€ä¸ªæ•´è¡¨ç¤ºæœ€æ—©ä»€ä¹ˆæ—¶å€™å¯ä»¥çˆ¬å‡ºï¼›å¦åˆ™è¾“å‡ºå¡é—¨æœ€é•¿å¯ä»¥å­˜æ´»å¤šé•¿æ—¶é—´ã€‚</p><h2>è¾“å…¥è¾“å‡ºæ ·ä¾‹</h2><p><strong>è¾“å…¥ #1</strong>å¤åˆ¶</p><p>20 4 5 4 9 9 3 2 12 6 10 13 1 1</p><p><strong>è¾“å‡º #1</strong>å¤åˆ¶</p><p>13</p><h2>è¯´æ˜/æç¤º</h2><p>[æ ·ä¾‹è¯´æ˜]</p><p>å¡é—¨å †æ”¾å¥¹æ”¶åˆ°çš„ç¬¬ä¸€ä¸ªåƒåœ¾ï¼šheight=9height=9ï¼›</p><p>å¡é—¨åƒæ‰å¥¹æ”¶åˆ°çš„ç¬¬22ä¸ªåƒåœ¾ï¼Œä½¿å¥¹çš„ç”Ÿå‘½ä»1010å°æ—¶å»¶ä¼¸åˆ°1313å°æ—¶ï¼›</p><p>å¡é—¨å †æ”¾ç¬¬33ä¸ªåƒåœ¾ï¼Œheight=19height=19ï¼›</p><p>å¡é—¨å †æ”¾ç¬¬44ä¸ªåƒåœ¾ï¼Œheight=20height=20ã€‚</p><p>Â æ€è·¯ï¼šç”¨f[i][j]æ¥è¡¨ç¤ºåˆ°ç¬¬iå †çš„æ—¶å€™ï¼Œé«˜åº¦åˆ°è¾¾jæ—¶å‰©ä¸‹çš„æœ€å¤§ç”Ÿå‘½å€¼ã€‚</p><p>åˆ›å»ºç»“æ„ä½“æ•°ç»„pè®°å½•ä¸‰ä¸ªä¿¡æ¯ï¼Œå³åƒåœ¾æ‰”ä¸‹çš„æ—¶åˆ»tï¼Œåƒäº†åƒåœ¾èƒ½ç»´æŒçš„æ—¶é—´fï¼Œå †åƒåœ¾èƒ½å¢åŠ çš„é«˜åº¦hã€‚</p><p>å› ä¸ºæœ‰æ¯å †åƒåœ¾è¦ä¹ˆå †è¦ä¹ˆåƒï¼Œæ‰€ä»¥æœ‰ä¸¤ç§çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p><p>ç”¨äºå †ï¼ˆé«˜åº¦å¢åŠ ï¼Œå‰©ä¸‹çš„æœ€å¤§ç”Ÿå‘½å€¼æ˜¯ç¬¬i-1å †åˆ°è¾¾é«˜åº¦jæ—¶çš„æœ€å¤§ç”Ÿå‘½å€¼å‡å»ç¬¬iå †å’Œç¬¬i-1å †çš„æ—¶é—´å·®ï¼‰ï¼š</p><p>f[i] [j+p[i].h]=max(f[i] [j+h], f[i-1] [j]- (p[i].t-p[i-1].t) )</p><p>ç”¨äºåƒï¼ˆé«˜åº¦ä¸å˜ï¼Œå‰©ä¸‹çš„æœ€å¤§ç”Ÿå‘½å€¼æ˜¯ç¬¬i-1å †åˆ°è¾¾jé«˜åº¦æ—¶å‰©ä¸‹çš„æœ€å¤§ç”Ÿå‘½å€¼å‡å»ç¬¬iå †å’Œç¬¬i-1å †çš„æ—¶é—´å·®+åƒäº†ç¬¬iå †èƒ½ç»´æŒçš„æ—¶é—´ï¼‰</p><p>f[i] [j]=max(f[i] [j],f[i-1][j]-(p[i].t-p[i-1].t)+p[i].f)</p><p>åªæœ‰å½“æˆ‘ä»¬ç¬¬i-1å †å‰©ä½™çš„æœ€å¤§ç”Ÿå‘½å€¼å¤§äºç­‰äºä»ç¬¬i-1å †åˆ°ç¬¬iå †ç›¸å·®çš„æ—¶é—´æˆ‘ä»¬æ‰èƒ½è¿›è¡Œç¬¬iå †çš„è½¬æ¢ï¼Œæ‰€ä»¥å½“è¿›è¡Œä¸Šé¢ä¸¤ä¸ªè½¬ç§»ä¹‹å‰æˆ‘ä»¬è¦å…ˆåˆ¤æ–­ä¸€ä¸‹æ˜¯å¦ç¬¦åˆæ¡ä»¶ã€‚</p><p>é‚£ä¹ˆèƒ½é€ƒå‡ºå»çš„æ—¶åˆ»ï¼Œå°±æ˜¯èƒ½è¿›è¡ŒçŠ¶æ€è½¬ç§»ï¼Œå¹¶ä¸”åˆ°è¾¾çš„é«˜åº¦jåŠ ä¸Šç¬¬iå †çš„hå¤§äºç­‰äºdçš„æ—¶åˆ»ï¼Œå› ä¸ºå †åƒåœ¾ä¸è´¹æ—¶é—´ï¼Œæ‰€ä»¥ç›´æ¥å°±æ˜¯æ‰”ä¸‹ç¬¬iå †çš„æ—¶åˆ»ã€‚ç›´æ¥åˆ¤æ–­å¦‚æœæ»¡è¶³æ¡ä»¶ç›´æ¥è¾“å‡ºiçš„æ—¶åˆ»å³å¯ã€‚</p><p>é‚£ä¹ˆå¦‚æœä¸èƒ½é€ƒå‡ºå»ï¼Œå°±æ˜¯æˆ‘ä»¬æŠŠèƒ½åƒçš„åƒåœ¾å…¨éƒ½åƒæ‰æ‰€ç»´æŒçš„æ—¶é—´ã€‚ansè¡¨ç¤ºæœ€å¤§èƒ½ç»´æŒçš„æ—¶åˆ»ï¼Œåˆšå¼€å§‹ä¸º10ï¼Œans=10ã€‚ç„¶åéå†ä¸€épæ•°ç»„ï¼Œå¦‚æœæœ€å¤§èƒ½ç»´æŒçš„æ—¶åˆ»å°äºç¬¬iå †åƒåœ¾æ‰”ä¸‹æ¥çš„æ—¶åˆ»ï¼Œé‚£ä¹ˆè¯´æ˜åœ¨ç¬¬iå †æ‰”ä¸‹ä¹‹å‰å°±æ­»äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥breakå°±è¡Œï¼Œå¦åˆ™çš„è¯è¯´æ˜åœ¨ç¬¬iå †æ‰”ä¸‹æ¥çš„æ—¶åˆ»æ²¡æœ‰æ­»ï¼Œé‚£ä¹ˆå°±åŠ ä¸Šåƒæ‰ç¬¬iå †ç»´æŒçš„æ—¶é—´fã€‚æœ€åè¾“å‡ºanså³å¯ã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;algorithm&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cstring&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> d<span class="token punctuation">,</span>n<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token operator">=</span><span class="token number">105</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">name</span><span class="token punctuation">{</span>
	<span class="token keyword">int</span> t<span class="token punctuation">,</span>f<span class="token punctuation">,</span>h<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
name p<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> f<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> <span class="token function">cmp</span><span class="token punctuation">(</span>name a<span class="token punctuation">,</span>name b<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> a<span class="token punctuation">.</span>t <span class="token operator">&lt;</span>b<span class="token punctuation">.</span>t <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	cin<span class="token operator">&gt;&gt;</span>d<span class="token operator">&gt;&gt;</span>n<span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		cin<span class="token operator">&gt;&gt;</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>t <span class="token operator">&gt;&gt;</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token operator">&gt;&gt;</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>h <span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">sort</span><span class="token punctuation">(</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span>n<span class="token punctuation">,</span>cmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">memset</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
	f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
	p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>t <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>d<span class="token punctuation">;</span>j<span class="token operator">&gt;=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//ç›¸å½“äºç”¨01èƒŒåŒ…ï¼Œæ»šåŠ¨æ•°ç»„</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">&gt;=</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>t <span class="token operator">-</span>p<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>t <span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//å¦‚æœä»–å‰©ä¸‹çš„æœ€å¤§æ—¶é—´å¤§äºåˆ°ç¬¬iå †éœ€è¦çš„æ—¶é—´</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>h <span class="token operator">&gt;=</span>d<span class="token punctuation">)</span><span class="token punctuation">{</span>
					cout<span class="token operator">&lt;&lt;</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>t <span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>h <span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>h <span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>t <span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>t <span class="token punctuation">)</span><span class="token punctuation">;</span>
				f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>t <span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>t <span class="token operator">+</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>f <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">int</span> ans<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">//æœ€å¤§æ´»çš„æ—¶é—´</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>ans<span class="token operator">&lt;</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>t <span class="token punctuation">)</span><span class="token keyword">break</span><span class="token punctuation">;</span>
		ans<span class="token operator">+=</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>f <span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout<span class="token operator">&lt;&lt;</span>ans<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/Chivas-Regal/Tech/edit/main/docs/zh/posts/acm/dp.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 119416648+Demomomomo@users.noreply.github.com">Demomomomo</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/zh/posts/acm/dfs.html" class="nav-link prev" aria-label="dfs"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->dfs</div></a><a href="/zh/posts/acm/kmp.html" class="nav-link next" aria-label="kmp"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">kmp<!----></div></a></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2022 Demo</div></footer><!--]--></div><!--]--><!----><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.fa60c1ef.js" defer></script>
  </body>
</html>
